(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,function(e,t,n){e.exports={globalContainer:"style_globalContainer__3f860",listContainer:"style_listContainer__2ZyAL",list:"style_list__1a7JZ",item:"style_item__26uB8",value:"style_value__2yEVq",arr:"style_arr__3VlzR",bool:"style_bool__3RRZj",null:"style_null__56dCV",num:"style_num__3O_M_",obj:"style_obj__1ADsl",str:"style_str__33mv6"}},,,,,,,function(e,t,n){e.exports={h2:"style_h2__2tUgO",h3:"style_h3__2dSPI",statsTable:"style_statsTable__1Y2DX"}},function(e,t,n){e.exports={container:"style_container__EIg9J",cardBody:"style_cardBody__3QmjJ",textArea:"style_textArea__Elur7"}},,,,,function(e,t,n){e.exports=n(23)},,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(13),l=n.n(s),o=(n(20),n(3)),i=n(4),u=n(6),c=n(5),h=n(7),y=(n(21),n(8)),d=n(10),v=n.n(d),m=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={value:""},n.handleTextAreaChange=n.handleTextAreaChange.bind(Object(y.a)(n)),n.onSubmit=n.onSubmit.bind(Object(y.a)(n)),n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"onSubmit",value:function(e){0!==this.state.value.length&&this.props.onSubmit(this.state.value)}},{key:"handleTextAreaChange",value:function(e){var t=e.target.value?e.target.value:"";this.setState({value:t})}},{key:"render",value:function(){return r.a.createElement("div",{className:v.a.container},r.a.createElement("h5",{className:"card-title"},"JSON Size Explorer"),r.a.createElement("p",null,"Understand the structure of your JSON files."),r.a.createElement("textarea",{id:"area",cols:60,rows:10,value:this.state.value,onChange:this.handleTextAreaChange,className:v.a.textArea}),r.a.createElement("br",null),r.a.createElement("button",{id:"sub",className:"btn btn-info btn-sm",onClick:this.onSubmit},"Submit"))}}]),t}(r.a.Component);function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e.length>t?e.substr(0,t)+"...":e}var b=new Intl.NumberFormat(navigator.language);function f(e){return b.format(e)}function j(e){var t=e.jsonStats;return r.a.createElement("div",null,r.a.createElement("h1",null,"Summary"),r.a.createElement("ul",null,r.a.createElement("li",null,"Total document size: ",f(t.totalLength)),r.a.createElement("li",null,"Number of keys: ",f(t.nbOfKey())),r.a.createElement("li",null,"Number of unique keys:"," ",f(Object.keys(t.keys).length)),r.a.createElement("li",null,"Key size: ",f(t.keySize())," -"," ",t.perc(t.keySize()),"%")))}var k=n(9),g=n.n(k);function E(e){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",{className:g.a.h2},"Keys"),r.a.createElement(O,{jsonStats:e.jsonStats}),r.a.createElement(S,{jsonStats:e.jsonStats})),r.a.createElement("div",null,r.a.createElement("h2",{className:g.a.h2},"Values"),r.a.createElement(_,{jsonStats:e.jsonStats}),r.a.createElement(w,{jsonStats:e.jsonStats})),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",{className:g.a.h2},"Duplicates"),r.a.createElement(C,{jsonStats:e.jsonStats}),r.a.createElement(V,{jsonStats:e.jsonStats}))))}function O(e){var t=e.jsonStats;return r.a.createElement(N,{title:"Most Frequently used keys",description:"List all the keys found in the JSON and order them by how many times they were found.",dataProvider:t.keySortedByCount.bind(t),processor:function(e){var n=e.length*t.keys[e];return[e,f(t.keys[e]),f(n),t.perc(n)]}})}function S(e){var t=e.jsonStats;return r.a.createElement(N,{title:"Heaviest keys",description:"List all the keys found in the JSON and order them by how many characters are needed to store them.",dataProvider:t.keySortedBySize.bind(t),processor:function(e){var n=e.length*t.keys[e];return[e,f(t.keys[e]),f(n),t.perc(n)]}})}function _(e){var t=e.jsonStats;return r.a.createElement(N,{title:"Most Frequent Values",description:"List all the values found in the JSON and order them by how many we saw them.",dataProvider:t.valuesSortedByCount.bind(t),processor:function(e){var n=t.values[e].length*e.length;return[e,f(t.values[e].length),f(n),t.perc(n)+"%"]}})}function w(e){var t=e.jsonStats;return r.a.createElement(N,{title:"Heaviest Values",description:"List all the values found in the JSON and order them by how many characters are needed to store them.",dataProvider:t.valuesSortedBySize.bind(t),processor:function(e){var n=t.values[e].length*e.length;return[e,f(t.values[e].length),f(n),t.perc(n)+"%"]}})}function C(e){var t=e.jsonStats;return r.a.createElement(N,{title:"Most Frequent Duplicates",description:"List all the tuples Key/Value found in the JSON and order them by how often we saw them.",dataProvider:t.freqDupsValue.bind(t),processor:function(e){var n=t.keyValue[e]*(e.length-3);return[e.replace("@#@"," = "),f(t.keyValue[e]),f(n),t.perc(n)+"%"]}})}function V(e){var t=e.jsonStats;return r.a.createElement(N,{title:"Heaviest Duplicates",description:"List all the tuples Key/Value ordered by how many characters are used to store them.",dataProvider:t.biggestDupsValue.bind(t),processor:function(e){var n=t.keyValue[e]*(e.length-3);return[e.replace("@#@"," = "),f(t.keyValue[e]),f(n),t.perc(n)+"%"]}})}function N(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:g.a.h3},e.title),r.a.createElement("div",{className:"alert alert-secondary",role:"alert"},e.description),r.a.createElement("table",{className:["table","table-striped","table-sm","table-hover",g.a.statsTable].join(" ")},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Key Name"),r.a.createElement("th",null,"Count"),r.a.createElement("th",null,"Size"),r.a.createElement("th",null,"%"))),r.a.createElement("tbody",null,(t=e.dataProvider,n=e.processor,t().slice(-5).map(n).map(K)))));var t,n}function K(e,t){return r.a.createElement("tr",{key:t},e.map(function(e,n){return r.a.createElement("td",{key:t+"-"+n},e)}))}var x=n(14),A=n(1),J=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.jsonStats,n=e.objKey,a=t.keys[n],s=t.keys[n]*n.length,l=this.props.jsonStats.distinctValue(this.props.objKey),o=l.reduce(function(e,t){return t.size+e},0);return r.a.createElement("div",null,r.a.createElement("h2",null,"Stats for '",n,"'"),r.a.createElement("ul",null,r.a.createElement("li",null,"The Key is found ",a," times in document"),r.a.createElement("li",null,"The weight of the key itself is ",f(s)," (",t.perc(s),"%)"),r.a.createElement("li",null,"The total size of all the keys and values"," ",f(o)," (",t.perc(o),"%)"),r.a.createElement("li",null,"Key has ",l.length," distinct values",l.length>1&&r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Value"),r.a.createElement("th",null,"#"),r.a.createElement("th",null,"%"))),r.a.createElement("tbody",null,[0,1].map(function(e){var a=l[e];return r.a.createElement("tr",{key:n+"-"+e},r.a.createElement("td",null,p(a.key,20)),r.a.createElement("td",null,f(a.count)),r.a.createElement("td",null,f(a.size)),r.a.createElement("td",null,t.perc(a.size)))}))))))}}]),t}(r.a.Component),z=n(2),B=n.n(z),P=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={hoverObjKey:"",expendedKeys:{}},n.toggleCollapsedKey=n.toggleCollapsedKey.bind(Object(y.a)(n)),n.hoverOn=n.hoverOn.bind(Object(y.a)(n)),n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"hoverOn",value:function(e){this.setState({hoverObjKey:e})}},{key:"toggleCollapsedKey",value:function(e){var t=A.clone(this.state.expendedKeys);A.has(t,e)?A.unset(t,e):A.set(t,e,!0),this.setState({expendedKeys:t})}},{key:"render",value:function(){return r.a.createElement("div",{className:"flex-row"},r.a.createElement("h2",null,"Json Explorer"),r.a.createElement("div",{className:B.a.globalContainer},r.a.createElement("div",{className:B.a.listContainer},r.a.createElement(L,{obj:this.props.jsonObj,stats:this.props.jsonStats,path:[],expendedKeys:this.state.expendedKeys,toggleCollapsedKey:this.toggleCollapsedKey,hoverOn:this.hoverOn})),r.a.createElement("div",null,this.state.hoverObjKey.length>0&&r.a.createElement(J,{jsonObj:this.props.jsonObj,jsonStats:this.props.jsonStats,objKey:this.state.hoverObjKey}))))}}]),t}(r.a.Component),L=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.obj,n=Object.keys(t);return n.sort(),r.a.createElement("ul",{className:B.a.list},n.map(function(n){var a=A.get(e.props.expendedKeys,n,!1);return r.a.createElement(T,{key:A.uniqueId(n),path:e.props.path.concat([n]),valueFromArray:A.isArray(t),value:t[n],stats:e.props.stats,toggleCollapsedKey:e.props.toggleCollapsedKey,isOpen:!1!==a,hoverOn:e.props.hoverOn,expendedKeys:!1!==a?a:{}})}))}}]),t}(r.a.Component),T=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).onClick=n.onClick.bind(Object(y.a)(n)),n.onHoverIn=n.onHoverIn.bind(Object(y.a)(n)),n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"onHoverIn",value:function(){this.props.hoverOn(this.props.path[this.props.path.length-1])}},{key:"onClick",value:function(){this.props.toggleCollapsedKey(this.props.path)}},{key:"render",value:function(){var e=this.props.path[this.props.path.length-1],t=this.props,n=t.value,a=t.stats,s=JSON.stringify(Object(x.a)({},e,n)).length-2,l=A.isPlainObject(n)||A.isArray(n),o=a.perc(s),i=this.props.valueFromArray?"Array Key "+e:e;return r.a.createElement("li",{className:B.a.item},r.a.createElement("span",{onClick:l?this.onClick:A.noop,style:{color:D(o/100)},onMouseEnter:this.onHoverIn},o,"% ",i," ",r.a.createElement(I,{value:n})),this.props.isOpen&&r.a.createElement(L,{obj:n,stats:a,path:this.props.path,toggleCollapsedKey:this.props.toggleCollapsedKey,expendedKeys:this.props.expendedKeys,hoverOn:this.props.hoverOn}))}}]),t}(r.a.Component);function D(e){return"hsl("+240*(1-e)+", 100%, 50%)"}function I(e){var t=e.value;return A.isNull(t)?r.a.createElement("span",{className:B.a.null+" "+B.a.value},"null"):A.isNumber(t)?r.a.createElement("span",{className:B.a.num+" "+B.a.value},t):A.isString(t)?r.a.createElement("span",{className:B.a.str+" "+B.a.value},'"',p(t,25),'"'):A.isArray(t)?r.a.createElement("span",{className:B.a.arr+" "+B.a.value},"[",t.length,"]"):A.isPlainObject(t)?r.a.createElement("span",{className:B.a.obj+" "+B.a.value},"{",A.size(t),"}"):A.isBoolean(t)?r.a.createElement("span",{className:B.a.bool+" "+B.a.value},String(t)):r.a.createElement(r.a.Fragment,null,"###")}function q(e){return r.a.createElement("div",null,r.a.createElement(j,{jsonStats:e.jsonStats}),r.a.createElement(E,{jsonStats:e.jsonStats}),r.a.createElement(P,{jsonStats:e.jsonStats,jsonObj:e.jsonObj}))}var F=function(){function e(t){Object(o.a)(this,e),this.totalLength=void 0,this.keyValue=void 0,this.keys=void 0,this.values=void 0,this.totalLength=t,this.keys={},this.values={},this.keyValue={}}return Object(i.a)(e,[{key:"addKeyValue",value:function(e,t,n){this.keys[e]||(this.keys[e]=0),this.keys[e]=this.keys[e]+1;var a=JSON.stringify(t),r=e+"@#@"+a;this.keyValue[r]||(this.keyValue[r]=0),this.keyValue[r]=this.keyValue[r]+1,this.values[a]||(this.values[a]=[]),this.values[a].push(n)}},{key:"keySortedByCount",value:function(){var e=this,t=Object.keys(this.keys);return t.sort(function(t,n){return e.keys[t]>e.keys[n]?1:e.keys[t]<e.keys[n]?-1:0}),t}},{key:"keySortedBySize",value:function(){var e=this,t=Object.keys(this.keys);return t.sort(function(t,n){var a=e.keys[t]*t.length,r=e.keys[n]*n.length;return a>r?1:a<r?-1:0}),t}},{key:"valuesSortedByCount",value:function(){var e=this,t=Object.keys(this.values);return t.sort(function(t,n){return e.values[t].length>e.values[n].length?1:e.values[t].length<e.values[n].length?-1:0}),t}},{key:"valuesSortedBySize",value:function(){var e=this,t=Object.keys(this.values);return t.sort(function(t,n){var a=t.length*e.values[t].length,r=n.length*e.values[n].length;return a>r?1:a<r?-1:0}),t}},{key:"nbOfKey",value:function(){var e=this;return Object.keys(this.keys).reduce(function(t,n){return t+e.keys[n]},0)}},{key:"keySize",value:function(){var e=this;return Object.keys(this.keys).reduce(function(t,n){return t+n.length*e.keys[n]},0)}},{key:"perc",value:function(e){return Math.floor(e/this.totalLength*1e3)/10}},{key:"freqDupsValue",value:function(){var e=this,t=Object.keys(this.keyValue).filter(function(t){return e.keyValue[t]>1});return t.sort(function(t,n){var a=e.keyValue[t],r=e.keyValue[n];return a>r?1:a<r?-1:0}),t}},{key:"biggestDupsValue",value:function(){var e=this,t=Object.keys(this.keyValue).filter(function(t){return e.keyValue[t]>1});return t.sort(function(t,n){var a=e.keyValue[t]*t.length,r=e.keyValue[n]*n.length;return a>r?1:a<r?-1:0}),t}},{key:"distinctValue",value:function(e){var t=this,n=Object.keys(this.keyValue).filter(function(t){return t.substr(0,e.length+"@#@".length)===e+"@#@"});return n.sort(function(e,n){return t.keyValue[e]>t.keyValue[n]?-1:t.keyValue[e]<t.keyValue[n]?1:0}),n.map(function(e){return{key:e,count:t.keyValue[e],size:t.keyValue[e]*e.length}})}}]),e}();function H(e){var t=new F(e.length);return function e(t,n,a){Object.keys(t).forEach(function(r){var s=t[r];n.addKeyValue(r,s,a),A.isPlainObject(s)?e(t[r],n,a+"."+r):A.isArray(s)&&s.forEach(function(t,s){A.isPlainObject(t)&&e(t,n,a+"."+r+"."+s)})})}(JSON.parse(e),t,""),t}var W=function(e){function t(e){var n;Object(o.a)(this,t),n=Object(u.a)(this,Object(c.a)(t).call(this,e));var a="".length?H(""):new F(0);return n.state={rawJsonString:"",jsonObj:{},jsonStats:a},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"onSubmit",value:function(e){var t=H(e),n=JSON.parse(e);this.setState({rawJsonString:e,jsonStats:t,jsonObj:n})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},0===this.state.rawJsonString.length&&r.a.createElement(m,{onSubmit:this.onSubmit.bind(this)}),0!==this.state.rawJsonString.length&&r.a.createElement(q,{jsonObj:this.state.jsonObj,jsonStats:this.state.jsonStats}))}}]),t}(r.a.Component),M=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function R(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}l.a.render(r.a.createElement(W,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/json-size-explorer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/json-size-explorer","/service-worker.js");M?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):R(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):R(t,e)})}}()}],[[15,1,2]]]);
//# sourceMappingURL=main.671910be.chunk.js.map